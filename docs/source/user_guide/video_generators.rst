
Video generators
================

Idtracker.ai provides a tool to generate *tracked videos*, i.e. a composition of the original input video with the trajectories and labels on top. These videos can be useful to visually validate the tacking or to share your results. The command below:

.. code-block:: bash

    idtrackerai_video path/to/session_folder

generates a general tracked video inside the session folder (see the Youtube video below on the left).

.. admonition:: Pose estimation
    :class: sidebar tip

    Individual videos can be useful to extract animal pose information with softwares like :external:`SLEAP <https://sleap.ai/>` and :external:`DeepLabCut <http://www.mackenziemathislab.org/deeplabcut/>`.


Individual videos can also be generated by adding the flag ``--individual`` to the command above, this creates a small individual video for each animal (see the Youtube video below on the middle) and, also, a general video collage (see the Youtube video below on the right).

Both video styles (general or individual) can draw the original video in grayscale by adding ``--gray`` to the command.

Finally, the video time interval can be optionally defined using ``--s`` (start) and ``--e`` (end). For example

.. code-block:: bash

    idtrackerai_video path/to/session_folder --individual --gray --s 0 --e 1000

generates individual videos in grayscale from frame 0 to frame 1000 with the trajectories of ``session_folder``.

.. raw:: html

    <div align="center">
    <iframe width="240" height="200" src="https://www.youtube.com/embed/U9JPLU5rlq0?loop=1&modestbranding=1&rel=0&playlist=U9JPLU5rlq0" frameborder="0" allowfullscreen></iframe>
    <iframe width="150" height="200" src="https://www.youtube.com/embed/yNRAtI5ZJh8?loop=1&modestbranding=1&rel=0&playlist=yNRAtI5ZJh8" frameborder="0" allowfullscreen></iframe>
    <iframe width="320" height="200" src="https://www.youtube.com/embed/cCOfTAU_3JA?loop=1&modestbranding=1&rel=0&playlist=cCOfTAU_3JA" frameborder="0" allowfullscreen></iframe>
    </div>

========

By running ``idtrackerai_video -h``, a list of all available options is displayed:

            --individual  Generate individual video. Default is a general video.
            --gray         Draw the original video in grayscale.
            --t            ``path`` Path to the trajectory file, default is session_dir/trajectories/without_gaps.npy.
            --tl           ``int`` Trail length, number of points used to draw the individual trajectories traces in general videos. Default is 20.
            --s            ``int`` Frame where to start the video.
            --e            ``int`` Frame where to end the video.
            --size         ``int`` Size of the squared individual videos. Defaults to the median body length of the animals.
            --no-labels   Show centroids in general video without labeled ID's.
